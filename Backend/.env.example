# CloudUnify Pro Backend - Example environment variables
# Copy this file to .env and adjust values as needed.
# Notes:
# - Health endpoints (/, /health, /healthz) do not require any secrets and always return 200.
# - Authentication flows (/auth, and routes protected by Bearer auth) REQUIRE JWT_SECRET.
#   If JWT_SECRET is unset, those routes return HTTP 503 (auth disabled).
# - Database config can use DATABASE_URL or fallback via DB_CONNECTION_FILE or discrete PG* vars.

# ------------------------------------------------------------------------------
# Server
# ------------------------------------------------------------------------------
HOST=0.0.0.0
PORT=3001
# Logging level for pino-http (info, debug, warn, error)
LOG_LEVEL=info
# Optional alternate log level variable used by some deployments
REACT_APP_LOG_LEVEL=info
# When behind proxies/load balancers (e.g., in PaaS), leave true
REACT_APP_TRUST_PROXY=true
NODE_ENV=development

# ------------------------------------------------------------------------------
# CORS
# ------------------------------------------------------------------------------
# Comma-separated list of allowed origins or "*" for all
CORS_ORIGIN=*

# ------------------------------------------------------------------------------
# JWT Auth (required for /auth and protected routes)
# ------------------------------------------------------------------------------
# REQUIRED: set a strong random secret in non-demo environments
# If left empty or unset, auth endpoints return 503 with a clear message.
JWT_SECRET=
JWT_EXPIRES_IN=1h
JWT_ISSUER=cloudunify-pro
JWT_AUDIENCE=cloudunify-pro-frontend

# ------------------------------------------------------------------------------
# Database
# ------------------------------------------------------------------------------
# Prefer a single DATABASE_URL like:
# postgresql://<user>:<password>@<host>:<port>/<database>
DATABASE_URL=

# Or point to a db_connection.txt file (fallback):
# If provided, the app extracts the first token starting with postgresql:// or postgres://
# Example (relative to repo root):
# DB_CONNECTION_FILE=../cloudunify-pro-284073-286484/Database/db_connection.txt
DB_CONNECTION_FILE=

# Or discrete PG* env vars (when DATABASE_URL and DB_CONNECTION_FILE are not set):
PGHOST=
PGPORT=5432
PGUSER=
PGPASSWORD=
PGDATABASE=
# Set to "true" to enable SSL with rejectUnauthorized=false
PGSSL=false
# Pool and connection tuning
PGPOOL_MAX=10
PGCONNECT_TIMEOUT_MS=5000
PGIDLE_TIMEOUT_MS=30000
PGAPPNAME=cloudunify-pro-backend

# ------------------------------------------------------------------------------
# Internal seeding endpoints (/_internal/seed, /_internal/seed/*)
# ------------------------------------------------------------------------------
# In production (NODE_ENV=production), you must set a token and supply it via X-Seed-Token header.
SEED_ADMIN_TOKEN=
# Optional explicit path for .projdefn discovery
PROJDEFN_DIR=

# ------------------------------------------------------------------------------
# Rate limiting (login)
# ------------------------------------------------------------------------------
LOGIN_RATE_LIMIT_WINDOW_MS=60000
LOGIN_RATE_LIMIT_MAX=10
