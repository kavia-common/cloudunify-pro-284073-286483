{"is_source_file": true, "format": "Python", "description": "This file defines a middleware class for FastAPI (Starlette framework) that configures HTTP response headers to facilitate embedding the application inside iframes during preview mode. It manages security-related headers like Content-Security-Policy, Cross-Origin-Embedder-Policy, and Cross-Origin-Opener-Policy based on whether preview mode is enabled.", "external_files": ["starlette.middleware.base", "starlette.requests", "starlette.responses"], "external_methods": ["starlette.middleware.base.BaseHTTPMiddleware.__init__", "super().__init__", "Callable.__call__"], "published": [], "classes": [{"name": "PreviewEmbeddingHeadersMiddleware", "description": "Middleware class for configuring response headers to support iframe embedding during preview mode."}], "methods": [{"name": "__init__(self, app, enabled: bool, frame_ancestors: str)", "description": "Initializes the middleware with application, enabled flag, and frame ancestors configuration.", "scope": "PreviewEmbeddingHeadersMiddleware", "scopeKind": "class"}, {"name": "Response dispatch(self, request: Request, call_next: Callable)", "description": "Asynchronously processes each request, modifies headers if preview mode is enabled to allow embedding.", "scope": "PreviewEmbeddingHeadersMiddleware", "scopeKind": "class"}], "calls": ["super().__init__", "call_next(request)", "del response.headers[\"X-Frame-Options\"]", "response.headers[\"Content-Security-Policy\"] = ...", "response.headers[\"Cross-Origin-Embedder-Policy\"] = \"unsafe-none\"", "response.headers[\"Cross-Origin-Opener-Policy\"] = \"same-origin-allow-popups\""], "search-terms": ["PreviewEmbeddingHeadersMiddleware", "headers configuration", "iframe embedding", "security headers", "FastAPI middleware", "starlette"], "state": 2, "file_id": 38, "knowledge_revision": 142, "git_revision": "", "ctags": [{"_type": "tag", "name": "PreviewEmbeddingHeadersMiddleware", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/core/middleware.py", "pattern": "/^class PreviewEmbeddingHeadersMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/core/middleware.py", "pattern": "/^    def __init__(self, app, enabled: bool, frame_ancestors: str):$/", "language": "Python", "kind": "member", "signature": "(self, app, enabled: bool, frame_ancestors: str)", "scope": "PreviewEmbeddingHeadersMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/core/middleware.py", "pattern": "/^    async def dispatch(self, request: Request, call_next: Callable) -> Response:$/", "language": "Python", "typeref": "typename:Response", "kind": "member", "signature": "(self, request: Request, call_next: Callable)", "scope": "PreviewEmbeddingHeadersMiddleware", "scopeKind": "class"}], "hash": "5d4f2c2d040d75765857279777d69baf", "format-version": 4, "code-base-name": "Backend", "filename": "Backend/fastapi_app/app/core/middleware.py", "revision_history": [{"142": ""}]}