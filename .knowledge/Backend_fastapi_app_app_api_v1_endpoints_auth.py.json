{"is_source_file": true, "format": "Python (FastAPI)", "description": "This file defines the authentication endpoints for a FastAPI-based backend, specifically handling user login with JWT token issuance, user lookup via email, password verification using bcrypt, and related data models and dependency injections.", "external_files": ["app/db/session.py", "app/models/schemas.py", "app/models/tables.py", "app/core/security.py"], "external_methods": ["get_session()", "UserOut.model_validate()", "create_jwt()"], "published": ["router"], "classes": [{"name": "LoginRequest", "description": "Pydantic model for the login request payload, containing email and password fields."}, {"name": "LoginResponse", "description": "Pydantic model for the login response, including the JWT token and user profile."}], "methods": [{"name": "Optional[User] _get_user_by_email(session: AsyncSession, email: str)", "description": "Asynchronously retrieves a User object from the database matching the provided email.", "scope": "", "scopeKind": ""}, {"name": "str _safe_lower(s: str)", "description": "Converts a string to lowercase and trims whitespace, used for email normalization.", "scope": "", "scopeKind": ""}, {"name": "LoginResponse login(payload: LoginRequest, session: AsyncSession = Depends(get_session))", "description": "FastAPI route handler for POST /auth/login; verifies credentials and returns a JWT token along with user info, or appropriate HTTP errors.", "scope": "", "scopeKind": ""}], "calls": ["get_session()", "UserOut.model_validate", "create_jwt()", "select()", "session.execute()", "HTTPException()", "getenv()", "_pwd_ctx.verify()"], "search-terms": ["auth login endpoint", "JWT authentication", "FastAPI auth route", "password verification bcrypt", "login request and response models"], "state": 2, "file_id": 52, "knowledge_revision": 173, "git_revision": "", "ctags": [{"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginResponse", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^class LoginResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_get_user_by_email", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^async def _get_user_by_email(session: AsyncSession, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(session: AsyncSession, email: str)"}, {"_type": "tag", "name": "_pwd_ctx", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^_pwd_ctx = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_safe_lower", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^def _safe_lower(s: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(s: str)"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^    email: str = Field(..., description=\"User email address (lowercased for lookup)\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^async def login(payload: LoginRequest, session: AsyncSession = Depends(get_session)) -> LoginRes/", "language": "Python", "typeref": "typename:LoginResponse", "kind": "function", "signature": "(payload: LoginRequest, session: AsyncSession = Depends(get_session))"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^    password: str = Field(..., description=\"User password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginRequest", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^router = APIRouter(tags=[\"Auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token", "path": "/home/kavia/workspace/code-generation/cloudunify-pro-284073-286483/Backend/fastapi_app/app/api/v1/endpoints/auth.py", "pattern": "/^    token: str = Field(..., description=\"Signed JWT token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "LoginResponse", "scopeKind": "class"}], "hash": "3a505ca61d2da9f54a227b282b179a3d", "format-version": 4, "code-base-name": "Backend", "filename": "Backend/fastapi_app/app/api/v1/endpoints/auth.py", "fields": [{"name": "_pwd_ctx = CryptContext(schemes=[\"bcrypt\"], deprecated=\"auto\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str email", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "LoginRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(tags=[\"Auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token", "scope": "LoginResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"173": ""}]}